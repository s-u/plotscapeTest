var PLOTSCAPE=(()=>{const i={};const r=[null];function t(t,e,s){i[t]={dependencies:e,factory:s};r[0]=t}t("require",["exports"],t=>{Object.defineProperty(t,"__cjsModule",{value:true});Object.defineProperty(t,"default",{value:t=>h(t)})});var a=this&&this.__createBinding||(Object.create?function(t,e,s,i){if(i===undefined)i=s;var r=Object.getOwnPropertyDescriptor(e,s);if(!r||("get"in r?!e.__esModule:r.writable||r.configurable)){r={enumerable:true,get:function(){return e[s]}}}Object.defineProperty(t,i,r)}:function(t,e,s,i){if(i===undefined)i=s;t[i]=e[s]});var l=this&&this.__exportStar||function(t,e){for(var s in t)if(s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s))a(e,t,s)};t("datastructures",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.plotTypeArray=e.validMembershipArray=e.baseMembershipArray=void 0;const s=[1,2,3];e.baseMembershipArray=s;const i=[...s,...s.map(t=>t+128),128];e.validMembershipArray=i;const r=["scatter","bubble","bar","histo","square"];e.plotTypeArray=r});t("functions",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.timeExecution=e.rectOverlap=e.pointInRect=e.uniqueRowIds=e.uniqueRows=e.arrTranspose=e.arrEqual=e.prettyBreaks=e.accessIndexed=e.accessUnpeel=e.accessDeep=e.throttle=e.unique=e.match=e.which=e.gatedMultiply=e.quantile=e.bin=e.capitalize=e.max=e.min=e.mean=e.sum=e.length=e.identity=e.isNumeric=void 0;const s=t=>typeof t[0]==="number";e.isNumeric=s;const i=t=>t;e.identity=i;const r=t=>t.length?t.length:0;e.length=r;const a=t=>t.reduce((t,e)=>t+e,0);e.sum=a;const n=t=>t.length>0?t.reduce((t,e)=>t+e)/t.length:null;e.mean=n;const l=t=>t.length>0?Math.min(...t):null;e.min=l;const o=t=>t.length>0?Math.max(...t):null;e.max=o;const h=t=>{return typeof t==="string"?t.charAt(0).toUpperCase()+t.slice(1):t.map(t=>t.charAt(0).toUpperCase()+t.slice(1))};e.capitalize=h;const c=(s,t=5)=>{const e=Math.max(...s)-Math.min(...s);const i=e/t;const r=Array.from(Array(t+1),(t,e)=>Math.min(...s)+e*i);const a=r.map((t,e)=>(t+r[e-1])/2);r.reverse();a.shift();return s.map(e=>r.findIndex(t=>e>=t)).map(t=>t===0?r.length-2:r.length-t-1).map(t=>a[t])};e.bin=c;const u=(t,e)=>{const s=t.sort((t,e)=>t-e);if(typeof e==="number"){const i=e*(s.length-1);const{lwr:r,uppr:a}={lwr:Math.floor(i),uppr:Math.ceil(i)};return s[r]+i%1*(s[a]-s[r])}else{const i=e.map(t=>t*(s.length-1));const{lwr:r,uppr:a}={lwr:i.map(t=>Math.floor(t)),uppr:i.map(t=>Math.ceil(t))};return i.map((t,e)=>s[r[e]]+t%1*(s[a[e]]-s[r[e]]))}};e.quantile=u;const d=(t,e,s)=>{if(t*e<s.min)return s.min;if(t*e>s.max)return s.max;return t*e};e.gatedMultiply=d;const p=(t,s)=>{return t.map((t,e)=>t===s?e:NaN).filter(t=>!isNaN(t))};e.which=p;const g=(t,e)=>{return t.map(t=>e.indexOf(t))};e.match=g;const f=t=>{const e=Array.from(new Set(t));return e.length===1?e[0]:e};e.unique=f;const y=(t,...e)=>{return e.reduce((t,e)=>t&&t[e],t)};e.accessDeep=y;const m=(e,...s)=>{const i=s.pop();let r;for(let t=s.length;t>=0;t--){r=y(e,...s,i)??null;if(r)break;s.pop()}return r};e.accessUnpeel=m;const x=(e,s)=>{const t=Object.keys(e).map(t=>[t,e[t][s]]);return Object.fromEntries(t)};e.accessIndexed=x;const w=(s,i)=>{let r=0;return(...t)=>{const e=(new Date).getTime();if(e-r<i)return;r=e;s(...t)}};e.throttle=w;const M=(t,e=4)=>{const[s,i]=[Math.min(...t),Math.max(...t)];const r=i-s;const a=r/e;const n=Math.floor(Math.log10(a));const l=[1,2,4,5,6,8,10].map(t=>(t-a/10**n)**2);const o=10**n*[1,2,4,5,6,8,10][l.indexOf(Math.min(...l))];const h=Math.abs(n)>4;const c=Math.round(s/o)*o;const u=Math.round(i/o)*o;const d=Array.from(Array((u-c)/o-1),(t,e)=>c+(e+1)*o);const p=[c,...d,u].map(t=>parseFloat(t.toFixed(4)));return h?p.map(t=>t.toExponential()):p};e.prettyBreaks=M;const b=(t,s)=>{return t.length==s.length&&t.every((t,e)=>t===s[e])};e.arrEqual=b;const v=s=>{return s[0].map((t,e)=>s.map(t=>t[e]))};e.arrTranspose=v;const P=s=>{const t=s[0].map((t,e)=>JSON.stringify(s.map(t=>t[e])));const e=f(t);const i=e.map(s=>t.flatMap((t,e)=>t===s?e:[]));const r=i.map(e=>{return s.map(t=>t[e[0]])});return{values:r,indices:i}};e.uniqueRows=P;const k=s=>{const t=s[0].map((t,e)=>JSON.stringify(s.map(t=>t[e])));const e=f(t);return t.map(t=>e.indexOf(t))};e.uniqueRowIds=k;const A=(t,e)=>{return(t[0]-e[0][0])*(t[0]-e[1][0])<0&&(t[1]-e[0][1])*(t[1]-e[1][1])<0};e.pointInRect=A;const C=(t,s)=>{const[e,i]=[0,1].map(e=>t.map(t=>t[e]));const[r,a]=[0,1].map(e=>s.map(t=>t[e]));return!(Math.max(...e)<Math.min(...r)||Math.min(...e)>Math.max(...r)||Math.max(...i)<Math.min(...a)||Math.min(...i)>Math.max(...a))};e.rectOverlap=C;const S=(t,s)=>{return t.map((t,e)=>t-s[e])};const _=(s,i,e)=>{const t=Math.min(...i.map(t=>t[0]));const r=Math.min(...i.map(t=>t[1]));const a=Math.max(...i.map(t=>t[0]));const n=Math.max(...i.map(t=>t[1]));if(s[0]<t||s[0]>a||s[1]<r||s[1]>n){return false}const l=Array.from(Array(i.length),(t,e)=>e);const o=Array.from(Array(i.length),(t,e)=>e);o.shift();o.push(0);const h=l.map((t,e)=>S(i[o[e]],i[t]));const c=i.map((t,e)=>{return[(s[1]-t[1])/h[e][1],(s[1]-t[1])/h[e][1]*h[e][0]+t[0]-s[0]]});const u=c.map(t=>t[1]).filter(t=>t>0&&t<e);return u.length%2===1};const O=t=>{const e=performance.now();t();const s=performance.now();return s-e};e.timeExecution=O});t("handlers/Handler",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Handler=void 0;class s{constructor(){this.registerCallbacks=(t,e)=>{this.callbacks.push(...t);this.when.push(...e);return this};this.notifyAll=s=>{this.callbacks.filter((t,e)=>this.when[e]===s).forEach(t=>t())};this.callbacks=[];this.when=[]}}e.Handler=s});t("handlers/MarkerHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MarkerHandler=void 0;class i extends s.Handler{constructor(t){super();this.isOfMembership=(t,e)=>{if(e===1)return true;const{current:s,past:i}=this;if(e===128){return s[t]>1?!!(s[t]&128):!!(i[t]&128)}return s[t]>1?s[t]>=e:i[t]>=e};this.updateCurrent=(t,e)=>{this.clearCurrent();this.current.update(t,e);this.notifyAll("updateCurrent")};this.mergeCurrent=()=>{this.past.merge(this.current.asPersistent());this.notifyAll("mergeCurrent")};this.clearCurrent=()=>{this.current=new r([...this.past.asPersistent()])};this.clearAll=()=>{this.current.clear();this.past.clear()};this.n=t;this.current=new r(t);this.past=new r(t);this.callbacks=[];this.when=[]}}e.MarkerHandler=i;class r extends Uint8Array{constructor(t){super(t);this.clear=()=>this.fill(1);this.asPersistent=()=>{const t=new r(this.length);let e=this.length;while(e--)t[e]=this[e]&~128;return t};this.asTransient=()=>{const t=new r(this.length);let e=this.length;while(e--)t[e]=this[e]&~128;return t};this.merge=t=>{let e=this.length;while(e--){if(t[e]===1)continue;this[e]=t[e]}};this.update=(t,e)=>{let s=t.length;if(e===128){while(s--)this[t[s]]=this[t[s]]|128;return}while(s--)this[t[s]]=e};if(typeof t==="number")this.fill(1)}}});t("handlers/KeypressHandler",["require","exports","functions","handlers/Handler"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.KeypressHandler=void 0;class r extends i.Handler{constructor(){super();this.keyPressed=t=>{if(this.pressing&&!this.isRedrawKey)return;this.pressing=true;if(this.validKeys.includes(t.code)){this.lastPressed=t.code;this.currentlyPressed[this.validKeys.indexOf(t.code)]=true;this.notifyAll("keyPressed")}};this.keyReleased=t=>{this.pressing=false;if(this.validKeys.includes(t.code)){this.currentlyPressed[this.validKeys.indexOf(t.code)]=false;this.notifyAll("keyReleased")}};this.isPressed=s=>{return this.currentlyPressed.filter((t,e)=>this.validKeys[e]===s)[0]};this.callbacks=[];this.validKeys=["Equal","Minus","BracketLeft","BracketRight","ControlLeft","ShiftLeft","KeyR","Digit1","Digit2"];this.redrawKeys=["Equal","Minus","BracketLeft","BracketRight","KeyR"];this.pressing=false;this.lastPressed="";this.currentlyPressed=Array(this.validKeys.length).fill(false);this.actions=["keydown","keyup"];this.consequences=["keyPressed","keyReleased"];this.actions.forEach((t,e)=>{document.body.addEventListener(t,t=>s.throttle(this[this.consequences[e]](t),100))})}get isRedrawKey(){return this.redrawKeys.includes(this.lastPressed)}get currentlyPressedKeys(){return this.validKeys.filter((t,e)=>this.currentlyPressed[e])}}e.KeypressHandler=r});t("handlers/StateHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.StateHandler=void 0;class i extends s.Handler{constructor(){super();this.activate=t=>{this.plotsActive[this.plotIds.indexOf(t)]=true;this.plotContainers[this.plotIds.indexOf(t)].classList.add("active")};this.activateAll=()=>{this.plotsActive.fill(true);this.plotContainers.forEach(t=>t.classList.add("active"))};this.deactivateAll=()=>{this.plotsActive.fill(false);this.plotContainers.forEach(t=>t.classList.remove("active"))};this.isActive=t=>{return this.plotsActive[this.plotIds.indexOf(t)]};this.inState=t=>{const{keypressHandler:e,validStates:s,stateKeys:i}=this;if(t==="none"&&!e.currentlyPressed.some(t=>t))return true;return e.isPressed(i[s.indexOf(t)])};this.plotIds=[];this.plotsActive=[];this.plotContainers=[];this.validStates=["not","or","group1","group2"];this.stateKeys=["ControlLeft","ShiftLeft","Digit1","Digit2"];this.membershipArray=[1,128,2,3]}get currentId(){const{stateKeys:t,keypressHandler:s}=this;return t.flatMap((t,e)=>s.currentlyPressedKeys.includes(t)?e:[])[0]??-1}get current(){return this.validStates[this.currentId]}get membership(){return this.membershipArray[this.currentId]??128}}e.StateHandler=i});t("handlers/DragHandler",["require","exports","functions","handlers/Handler"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DragHandler=void 0;class r extends i.Handler{constructor(t){super();this.startDrag=t=>{this.dragging=true;this.start=[t.offsetX,t.offsetY];this.notifyAll("startDrag")};this.whileDrag=t=>{const{dragging:e,notifyAll:s}=this;if(e){this.end=[t.offsetX,t.offsetY];const i=(this.start[0]-this.end[0])**2+(this.start[1]-this.end[1])**2;if(i>50)s("whileDrag")}};this.endDrag=()=>{this.dragging=false;this.notifyAll("endDrag")};this.container=t;this.dragging=false;this.start=[null,null];this.end=[null,null];this.actions=["mousedown","mousemove","mouseup"];this.consequences=["startDrag","whileDrag","endDrag"];this.actions.forEach((t,e)=>{this.container.addEventListener(t,s.throttle(this[this.consequences[e]],50))})}}e.DragHandler=r});t("globalparameters",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.globalParameters=void 0;e.globalParameters={bgCol:`#f2efde`,reps:{col:[`#cccccc`,`#1b9e77`,`#d95f02`,`#ffffffCC`],strokeCol:[null,null,null,`#000000`],strokeWidth:[null,null,null,2],radius:[5,5,5,5]}}});t("plot/GraphicLayer",["require","exports","globalparameters"],function(t,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphicLayer=void 0;class s{constructor(t,e){this.dropMissing=(...t)=>{let s=[...t].flatMap(t=>t.flatMap((t,e)=>t===null?e:[]).sort((t,e)=>t-e));s=Array.from(new Set(s));return[...t].map(t=>t.flatMap((t,e)=>s.indexOf(e)===-1?t:[]))};this.toAlpha=(t,e)=>{if(e===1)return t;const s=Math.floor(e*255).toString(16).toUpperCase();const i=s.length<2?t+"0"+s:t+s;return i};this.drawClear=()=>{const t=this.context;t.save();t.clearRect(0,0,this.width,this.height);t.restore()};this.drawBackground=()=>{const t=this.context;t.save();t.fillStyle=d.globalParameters.bgCol;t.fillRect(0,0,this.width,this.height);t.restore()};this.drawBarsV=(t,e,s,i={col:d.globalParameters.reps.col[0],strokeCol:null,strokeWidth:null,alpha:1,width:50})=>{const[r,a]=this.dropMissing(t,e);const{col:n,strokeCol:l,strokeWidth:o,alpha:h,width:c}=i;const u=this.context;u.save();u.fillStyle=this.toAlpha(n,h);u.strokeStyle=l;u.lineWidth=o;r.forEach((t,e)=>{n?u.fillRect(t-c/2,a[e],c,s-a[e]):null;l?u.strokeRect(t-c/2,a[e],c,s-a[e]):null});u.restore()};this.drawPoints=(t,s,e={col:d.globalParameters.reps.col[0],radius:5,strokeCol:null,strokeWidth:null,alpha:1})=>{const i=this.context;const{col:r,radius:a,strokeCol:n,strokeWidth:l,alpha:o}=e;const h=typeof a==="number"?Array.from(Array(t.length),t=>a):a;i.save();i.fillStyle=this.toAlpha(r,o);i.strokeStyle=n;i.lineWidth=l;t.forEach((t,e)=>{i.beginPath();i.arc(t,s[e],h[e],0,Math.PI*2);n?i.stroke():null;r?i.fill():null});i.restore()};this.drawRectsHW=(t,s,i,r,e={col:d.globalParameters.reps.col[0],strokeCol:null,strokeWidth:null,alpha:1})=>{const a=this.context;const{col:n,strokeCol:l,strokeWidth:o,alpha:h}=e;a.save();a.fillStyle=this.toAlpha(n,h);a.strokeStyle=l;a.lineWidth=o;t.forEach((t,e)=>{n?a.fillRect(t-r[e]/2,s[e]-i[e]/2,i[e],r[e]):null;l?a.strokeRect(t-r[e]/2,s[e]-i[e]/2,i[e],r[e]):null});a.restore()};this.drawLine=(t,s,e="black")=>{const i=this.context;i.save();i.beginPath();i.strokeStyle=e;i.moveTo(t[0],s[0]);t.shift();s.shift();t.forEach((t,e)=>{i.lineTo(t,s[e])});i.stroke();i.restore()};this.drawText=(t,s,i,e=20,r)=>{const a=this.context;a.save();a.textAlign="center";a.font=`${e}px Times New Roman`;t.forEach((t,e)=>{a.translate(t,s[e]);if(r)a.rotate(r/360*Math.PI*2);a.fillText(i[e],0,0);a.translate(-t,-s[e])});a.restore()};this.drawDim=(t="rgba(120, 120, 120, 0.1)")=>{const e=this.context;e.fillStyle=t;e.fillRect(0,0,this.width,this.height)};this.drawWindow=(t,e,s="rgba(0, 0, 0, 0.25)")=>{const i=this.context;i.save();i.strokeStyle=s;i.setLineDash([5,5]);i.clearRect(t[0],t[1],e[0]-t[0],e[1]-t[1]);i.restore()};this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.width=t;this.height=e;this.backgroundColour=d.globalParameters.bgCol;this.canvas.width=t;this.canvas.height=e}}e.GraphicLayer=s});t("DataFrame",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DataFrame=void 0;class s{constructor(e){Object.keys(e).forEach(t=>this[t]=e[t])}get _indicator(){return Array(this[Object.keys(this)[0]].length).fill(1)}}e.DataFrame=s});t("wrangler/Cast",["require","exports","functions"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Cast=void 0;class i{constructor(t){this.getSplitOf=t=>{const{acrossVec:e,indices:s,uniqueIndices:i,marker:r}=this;const a=Array.from(Array(i.length),t=>[]);let n=s.length;while(n--){if(!t||r.isOfMembership(n,t)){a[s[n]].push(e[n])}}return a};this.extract=(s=1)=>{const{marker:i,allUnique:t,withinFun:e,withinArgs:r,acrossVec:a,getSplitOf:n}=this;if(s){if(t){return a.filter((t,e)=>i.isOfMembership(e,s))??[]}return n(s).filter(t=>t.length>0).flatMap(t=>e(t,...r))}if(t)return a;return n().filter(t=>t.length>0).flatMap(t=>e(t,...r))};this.registerAcross=(t,...e)=>{this.acrossFun=t;this.acrossArgs=e;return this};this.registerWithin=(t,...e)=>{this.withinFun=t;this.withinArgs=e;return this};this.vector=t;this.marker=null;this.indices=null;this.allUnique=false;this.acrossFun=s.identity;this.acrossArgs=[];this.withinFun=s.identity;this.withinArgs=[]}get uniqueIndices(){return Array.from(new Set(this.indices))}get acrossVec(){return this.acrossFun(this.vector,...this.acrossArgs)}get defaultSplit(){const{acrossVec:i,indices:t,uniqueIndices:e}=this;const s=e.map(s=>t.flatMap((t,e)=>t===s?i[e]:[]));return s}}e.Cast=i});t("wrangler/Wrangler",["require","exports","functions","wrangler/Cast"],function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Wrangler=void 0;class s{constructor(t,e,s){this.getVariable=t=>{return this.data[this.mapping.get(t)]};this.extractAsIs=(...t)=>{this.indices=Array.from(Array(this.marker.n),(t,e)=>e);t.forEach(t=>{this[t]=new r.Cast(this.getVariable(t));this[t].marker=this.marker;this[t].allUnique=true});return this};this.splitBy=(...t)=>{t.forEach((t,e)=>{this.by.add(t);this[t]=new r.Cast(this.getVariable(t));this[t].marker=this.marker});return this};this.splitWhat=(...t)=>{t.forEach(t=>{this.what.add(t);this[t]=new r.Cast(this.getVariable(t));this[t].marker=this.marker});return this};this.doAcross=(t,e,...s)=>{if(t==="by"||t==="what"){Array.from(this[t]).forEach(t=>{this[t].registerAcross(e,...s)});return this}this[t].registerAcross(e,...s);return this};this.doWithin=(t,e,...s)=>{if(t==="by"||t==="what"){Array.from(this[t]).forEach(t=>{this[t].registerWithin(e,...s)});return this}this[t].registerWithin(e,...s);return this};this.assignIndices=()=>{const{what:t,by:e}=this;const s=Array.from(e).map(t=>this[t].acrossVec);this.indices=i.uniqueRowIds(s);Array.from([...e,...t]).map(t=>{this[t].indices=this.indices});return this};this.data=t;this.mapping=e;this.marker=s;this.indices=[];this.by=new Set;this.what=new Set}}e.Wrangler=s});t("representations/Representation",["require","exports","datastructures","functions","globalparameters"],function(t,e,s,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Representation=void 0;class r{constructor(t){this.getMapping=(t,e=1)=>{let s=this.wrangler[t]?.extract(e);s=this.scales[t]?.dataToPlot(s);return s??[]};this.getPars=t=>{if(t===128)return this.pars[this.pars.length-1];return this.pars[(t&~128)-1]};this.drawBase=t=>{};this.drawHighlight=(t,e)=>{};this.registerScales=t=>{this.scales=t;return this};this.defaultize=()=>{this.alphaMultiplier=1;this.sizeMultiplier=1};this.inSelection=e=>{const{wrangler:t,boundingRects:s}=this;const i=s.map(t=>{return a.rectOverlap(e,t)});const r=t.indices.flatMap((t,e)=>{return i[t]?e:[]});return r};this.atClick=e=>{const{wrangler:t,boundingRects:s}=this;const i=s.map(t=>{return a.pointInRect(e,t)});const r=t.indices.flatMap((t,e)=>{return i[t]?e:[]});return r};this.onKeypress=t=>{const{sizeMultiplier:e,sizeLimits:s,alphaMultiplier:i,alphaLimits:r}=this;if(t==="KeyR")this.defaultize();if(t==="Minus"&&e){this.sizeMultiplier=a.gatedMultiply(e,.8,s)}if(t==="Equal"&&e&&e<s.max){this.sizeMultiplier=a.gatedMultiply(e,1.2,s)}if(t==="BracketLeft"&&i){this.alphaMultiplier=a.gatedMultiply(i,.8,r)}if(t==="BracketRight"&&i)this.alphaMultiplier=a.gatedMultiply(i,1.2,r)};this.wrangler=t;this.pars=s.validMembershipArray.map(t=>{const e=i.globalParameters.reps;if(t===128)return a.accessIndexed(e,e.col.length-1);return a.accessIndexed(e,(t&~128)-1)});this.sizeMultiplier=1;this.alphaMultiplier=1;this.sizeLimits={min:.001,max:10};this.alphaLimits={min:.01,max:1}}get boundingRects(){return[]}}e.Representation=r});t("representations/Bars",["require","exports","datastructures","representations/Representation"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Bars=void 0;class r extends i.Representation{constructor(t,e){super(t);this.defaultize=()=>{this.sizeMultiplier=this.widthMultiplier;this.alphaMultiplier=1};this.getMappings=e=>{const t=["x","y"];return t.map(t=>this.getMapping(t,e))};this.drawBase=t=>{const[e,s]=this.getMappings(0);const{y0:i,width:r,alphaMultiplier:a}=this;const{col:n,strokeCol:l,strokeWidth:o}=this.pars[0];const h={col:n,strokeCol:l,strokeWidth:o,alpha:a,width:r};t.drawBarsV(e,s,i,h)};this.drawHighlight=h=>{s.validMembershipArray.forEach(t=>{const[e,s]=this.getMappings(t);if(!(e.length>0))return;const{y0:i,width:r}=this;const{col:a,strokeCol:n,strokeWidth:l}=this.getPars(t);const o={col:a,strokeCol:n,strokeWidth:l,alpha:1,width:r};h.drawBarsV(e,s,i,o)})};this.widthMultiplier=e;this.sizeMultiplier=e;this.sizeLimits={min:.01,max:1};this.alphaMultiplier=1}get y0(){return this.scales.y.plotMin}get width(){return this.sizeMultiplier*(this.getMapping("x").sort()[1]-this.getMapping("x").sort()[0])}get boundingRects(){const[t,s]=this.getMappings();const[i,r]=[this.width/2,this.scales.y.plotMin];return t.map((t,e)=>[[t-i,r],[t+i,s[e]]])}}e.Bars=r});t("representations/Points",["require","exports","datastructures","representations/Representation"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Points=void 0;class r extends i.Representation{constructor(t){super(t);this.getMappings=e=>{const t=["x","y","size"];let[s,i,r]=t.map(t=>this.getMapping(t,e));const a=this.getPars(e).radius;r=r.length>0?r.map(t=>a*t*this.sizeMultiplier):Array.from(Array(s.length),t=>a*this.sizeMultiplier);return[s,i,r]};this.drawBase=t=>{const[e,s,i]=this.getMappings(1);const{col:r,strokeCol:a,strokeWidth:n}=this.getPars(1);const l={col:r,radius:i,strokeCol:a,strokeWidth:n,alpha:this.alphaMultiplier};t.drawPoints(e,s,l)};this.drawHighlight=o=>{s.validMembershipArray.forEach(t=>{const[e,s,i]=this.getMappings(t);if(!(e.length>0))return;const{col:r,strokeCol:a,strokeWidth:n}=this.getPars(t);const l={col:r,radius:i,strokeCol:a,strokeWidth:n,alpha:1};o.drawPoints(e,s,l)})}}get boundingRects(){const[t,s,i]=this.getMappings(1);const r=1/Math.sqrt(2);return t.map((t,e)=>[[t-r*i[e],s[e]-r*i[e]],[t+r*i[e],s[e]+r*i[e]]])}}e.Points=r});t("representations/Squares",["require","exports","representations/Representation","datastructures"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Squares=void 0;class r extends s.Representation{constructor(t){super(t);this.getMappings=(e=1)=>{const t=["x","y","size"];let[s,i,r]=t.map(t=>this.getMapping(t,e));const a=this.getPars(e).radius;r=r?r.map(t=>a*t*this.sizeMultiplier):Array.from(Array(s.length),t=>a).map(t=>t*this.sizeMultiplier);return[s,i,r]};this.drawBase=t=>{const[e,s,i]=this.getMappings(1);const{col:r,strokeCol:a,strokeWidth:n}=this.pars[0];const l={col:r,strokeCol:a,strokeWidth:n,alpha:this.alphaMultiplier};t.drawRectsHW(e,s,i,i,l)};this.drawHighlight=o=>{i.validMembershipArray.forEach(t=>{const[e,s,i]=this.getMappings(t);if(!e)return;const{col:r,strokeCol:a,strokeWidth:n}=this.getPars(t);const l={col:r,strokeCol:a,strokeWidth:n,alpha:1};o.drawRectsHW(e,s,i,i,l)})}}get boundingRects(){const[t,s,i]=this.getMappings();return t.map((t,e)=>[[t-i[e]/2,s[e]-i[e]/2],[t+i[e]/2,s[e]+i[e]/2]])}}e.Squares=r});t("representations/representations",["require","exports","representations/Representation","representations/Bars","representations/Points","representations/Squares"],function(t,e,s,i,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});l(s,e);l(i,e);l(r,e);l(a,e)});t("scales/Scale",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Scale=void 0;class s{constructor(t,e=1,s=.1){this.registerData=t=>{this.data=t;return this};this.pctToUnits=t=>{const{length:e,offset:s,direction:i}=this;return typeof t==="number"?s+i*e*t:t.map(t=>s+i*e*t)};this.unitsToPct=t=>{const{length:e}=this;return typeof t==="number"?t/e:t.map(t=>t/e)};this.dataToPlot=t=>{};this.length=t;this.direction=e;this.expand=s;this.offset=this.direction===-1?this.length:0}}e.Scale=s});t("scales/ScaleContinuous",["require","exports","scales/Scale"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScaleContinuous=void 0;class i extends s.Scale{constructor(t,e=1,s=false,i=.1){super(t,e,i);this.data=[];this.registerData=t=>{this.data=this.zero?[].concat([0],t):t;return this};this.inRange=t=>{return t>=this.dataMin&&t<=this.dataMax};this.pctToData=t=>{const{dataMin:e,range:s}=this;return typeof t==="number"?e+t*s:t.map(t=>e+t*s)};this.dataToPct=t=>{const{dataMin:e,range:s}=this;return typeof t==="number"?(t-e)/s:t.map(t=>(t-e)/s)};this.dataToUnits=t=>{const{dataMin:e,length:s,offset:i,direction:r,range:a}=this;return typeof t==="number"?i+r*s*(t-e)/a:t.map(t=>i+r*s*((t-e)/a))};this.unitsToData=t=>{const{dataMin:e,length:s,offset:i,direction:r,range:a}=this;return typeof t==="number"?e+r*a*(t-i)/s:t.map(t=>e+r*a*((t-i)/s))};this.zero=s}get dataMin(){const{data:t,expand:e}=this;return this.zero?0:Math.min(...t)-e*(Math.max(...t)-Math.min(...t))}get dataMax(){const{data:t,expand:e}=this;return Math.max(...t)+e*(Math.max(...t)-Math.min(...t))}get range(){return this.dataMax-this.dataMin}}e.ScaleContinuous=i});t("scales/AreaScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AreaScaleContinuous=void 0;class i extends s.ScaleContinuous{constructor(t,e=1,s=false){super(t,e,s);this.dataToPlot=t=>{const e=this.dataToUnits(t);return typeof e==="number"?Math.sqrt(e):e.map(t=>Math.sqrt(t))}}get dataMin(){return 0}}e.AreaScaleContinuous=i});t("scales/ScaleDiscrete",["require","exports","scales/Scale"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScaleDiscrete=void 0;class i extends s.Scale{constructor(t,e=1,s=.1){super(t,e,s);this.toString=t=>{if(typeof t==="string"||typeof t[0]==="string")return t;return t.length?t.map(t=>`${t}`):`${t}`};this.registerData=t=>{this.data=t;const e=Array.from(new Set([...t]));this.values=typeof e[0]==="number"?e.sort((t,e)=>t-e):e.sort();this.positions=Array.from(Array(this.values.length),(t,e)=>(e+1)/(this.values.length+1));return this};this.dataToUnits=t=>{const{values:e,length:s,direction:i,positions:r,offset:a}=this;const n=this.toString(t);const l=this.toString(e);if(typeof n==="string"){return l.indexOf(n)!==-1?a+i*s*r[l.indexOf(n)]:null}return n.map(t=>l.indexOf(t)!==-1?a+i*s*r[l.indexOf(t)]:null)};this.values=[]}}e.ScaleDiscrete=i});t("scales/XYScaleDiscrete",["require","exports","scales/ScaleDiscrete"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XYScaleDiscrete=void 0;class i extends s.ScaleDiscrete{constructor(t,e=1,s=.1,i={lower:.2,upper:.1}){super(t,e,s);this.dataToPlot=t=>{return this.dataToUnits(t)};this.pctToPlot=t=>{return this.pctToUnits(t)};this.plotToPct=t=>{return this.unitsToPct(t)};this.margins=i;this.offset=this.offset+this.direction*this.length*this.margins.lower;this.length=(1-this.margins.lower-this.margins.upper)*this.length}get plotMin(){return this.pctToUnits(0)}get plotMax(){return this.pctToUnits(1)}}e.XYScaleDiscrete=i});t("scales/XYScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XYScaleContinuous=void 0;class i extends s.ScaleContinuous{constructor(t,e=1,s=false,i=.1,r={lower:.2,upper:.1}){super(t,e,s,i);this.dataToPlot=t=>{return this.dataToUnits(t)};this.plotToData=t=>{return this.unitsToData(t)};this.pctToPlot=t=>{return this.pctToUnits(t)};this.plotToPct=t=>{return this.unitsToPct(t)};this.margins=r;this.offset=this.offset+this.direction*this.length*this.margins.lower;this.length=(1-this.margins.lower-this.margins.upper)*this.length}get plotMin(){return this.pctToUnits(0)}get plotMax(){return this.pctToUnits(1)}}e.XYScaleContinuous=i});t("scales/scales",["require","exports","scales/Scale","scales/AreaScaleContinuous","scales/XYScaleDiscrete","scales/XYScaleContinuous"],function(t,e,s,i,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});l(s,e);l(i,e);l(r,e);l(a,e)});t("auxiliaries/Auxiliary",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Auxiliary=void 0;class s{constructor(){this.registerScales=t=>{this.scales=t;return this};this.draw=(t,...e)=>{};this.drawBase=(t,...e)=>{};this.drawUser=(t,e,...s)=>{}}}e.Auxiliary=s});t("auxiliaries/AxisBox",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisBox=void 0;class i extends s.Auxiliary{constructor(){super(...arguments);this.draw=t=>{const e=this.scales.x.plotMin;const s=this.scales.x.plotMax;const i=this.scales.y.plotMin;const r=this.scales.y.plotMax;t.drawLine([e,s],[i,i]);t.drawLine([e,e],[i,r])};this.drawBase=t=>{this.draw(t)};this.drawHighlight=t=>{this.draw(t)}}}e.AxisBox=i});t("auxiliaries/AxisText",["require","exports","auxiliaries/Auxiliary","functions"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisText=void 0;class r extends s.Auxiliary{constructor(t,e){super();this.getLabelMetrics=e=>{return this.labels.map(t=>e.context.measureText(t))};this.draw=t=>{const s=this.getLabelMetrics(t).map(t=>t.width);const i=this.getLabelMetrics(t).map(t=>t.actualBoundingBoxAscent);const e=Array.from(Array(this.breaks.length),t=>this.scales[this.other].plotMin);const r=this.along==="x"?this.breaks:e.map((t,e)=>-5+t-s[e]);const a=this.along==="x"?e.map((t,e)=>5+t+2*i[e]):this.breaks;t.drawText(r,a,this.labels)};this.drawBase=t=>{this.draw(t)};this.along=t;this.other=t==="x"?"y":"x";this.nbreaks=e??4}get dataBreaks(){return this.scales[this.along].values??i.prettyBreaks(this.scales[this.along].data,this.nbreaks)}get breaks(){return this.scales[this.along].dataToPlot(this.dataBreaks)}get labels(){return this.scales[this.along].values?this.scales[this.along].values.map(t=>t.toString()):this.dataBreaks.map(t=>t.toString())}}e.AxisText=r});t("auxiliaries/AxisTitle",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisTitle=void 0;class i extends s.Auxiliary{constructor(t,e){super();this.getLabelMetrics=t=>{return t.context.measureText(this.label)};this.draw=t=>{if(this.label==="_indicator")return;const e=this.getLabelMetrics(t).width;const s=this.getLabelMetrics(t).actualBoundingBoxAscent;const i=this.along==="x"?this.scales.x.pctToPlot(.5):this.scales.x.pctToPlot(0)-50;const r=this.along==="x"?this.scales.y.pctToPlot(0)+50:this.scales.y.pctToPlot(.5);const a=this.along==="x"?0:270;t.drawText([i],[r],[this.label],30,a)};this.drawBase=t=>{this.draw(t)};this.along=t;this.other=t==="x"?"y":"x";this.label=e}}e.AxisTitle=i});t("auxiliaries/HighlightRects",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.HighlightRects=void 0;class i extends s.Auxiliary{constructor(t){super();this.updateCurrentOrigin=t=>{this.current[0]=t};this.updateCurrentEndpoint=t=>{this.current[1]=t};this.updateLast=()=>{this.last=[this.current[0],this.current[1]];this.empty=false};this.pushLastToPast=()=>{this.past.push([this.last[0],this.last[1]]);this.empty=false};this.clear=()=>{this.last=[[null,null],[null,null]];this.past=[];this.empty=true};this.draw=(t,e)=>{t.drawWindow([e[0][0],e[0][1]],[e[1][0],e[1][1]])};this.drawUser=e=>{const{drag:t,state:s}=this.handlers;if(!this.empty&&!s.inState("none")){e.drawClear();e.drawDim();this.past.forEach(t=>{this.draw(e,t)});this.draw(e,this.last)}else if(!this.empty){e.drawClear();e.drawDim();this.draw(e,this.last)}else{e.drawClear()}};this.current=[[null,null],[null,null]];this.last=[[null,null],[null,null]];this.past=[];this.empty=true;this.handlers=t;this.bgDrawn=false}get lastComplete(){return!this.last.flat().some(t=>t===null)}}e.HighlightRects=i});t("auxiliaries/auxiliaries",["require","exports","auxiliaries/Auxiliary","auxiliaries/AxisBox","auxiliaries/AxisText","auxiliaries/AxisTitle","auxiliaries/HighlightRects"],function(t,e,s,i,r,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});l(s,e);l(i,e);l(r,e);l(a,e);l(n,e)});t("plot/GraphicStack",["require","exports","plot/GraphicLayer"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphicStack=void 0;class i{constructor(t){this.initialize=()=>{const t=["graphicBase","graphicUser","graphicHighlight"];this.graphicDiv.appendChild(this.graphicContainer);this.graphicContainer.setAttribute("class","graphicContainer");this.width=parseInt(getComputedStyle(this.graphicContainer).width,10);this.height=parseInt(getComputedStyle(this.graphicContainer).height,10);t.forEach(t=>{this[t]=new s.GraphicLayer(this.width,this.height);this.graphicContainer.appendChild(this[t].canvas)});this.graphicBase.drawBackground()};this.graphicDiv=t;this.graphicContainer=document.createElement("div");this.initialize()}}e.GraphicStack=i});t("plot/Plot",["require","exports","functions","auxiliaries/auxiliaries","handlers/handlers","plot/GraphicStack"],function(t,e,l,a,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Plot=void 0;class i extends s.GraphicStack{constructor(t,e,s,i,r){super(e);this.activate=()=>{this.handlers.state.deactivateAll();this.handlers.state.activate(this.id)};this.callChildren=(t,e,...s)=>{const i=this[t];Object.keys(i).forEach(t=>{i[t][e]?i[t][e](...s):null})};this.mapChildren=(t,e,...s)=>{const i=this[t];return Object.keys(i).map(t=>{return i[t][e]?i[t][e](...s):null})};this.getUnique=e=>{const{wranglers:s}=this;const t=Object.keys(s).flatMap(t=>s[t][e].extract()??[]);return Array.from(new Set(t))};this.inSelection=t=>{const{mapChildren:e}=this;const s=e("representations","inSelection",t);return Array.from(new Set(s.flat()))};this.inClickPosition=t=>{const{mapChildren:e}=this;const s=e("representations","atClick",t);return Array.from(new Set(s.flat()))};this.startDrag=()=>{const{marker:t,state:e,drag:s}=this.handlers;const{highlightrects:i}=this.auxiliaries;if(!e.inState("none")&&i.lastComplete){i.pushLastToPast()}i.updateCurrentOrigin(s.start)};this.whileDrag=()=>{const{marker:t,drag:e,state:s}=this.handlers;const{highlightrects:i}=this.auxiliaries;i.updateCurrentEndpoint(e.end);i.updateLast();this.drawUser();t.updateCurrent(this.inSelection([e.start,e.end]),s.membership)};this.endDrag=()=>{const{marker:t,state:e}=this.handlers;const{highlightrects:s}=this.auxiliaries;t.mergeCurrent();if(!e.inState("none")&&s.lastComplete){s.pushLastToPast()}};this.onKeypress=()=>{const{callChildren:t,drawHighlight:e}=this;const{keypress:s}=this.handlers;t("handlers","onKeypress",s.lastPressed);if(this.active){t("representations","onKeypress",s.lastPressed);e()}};this.onKeyRelease=()=>{const{handlers:t,callChildren:e}=this;e("handlers","onKeyRelease",t.keypress.lastPressed);if(this.active){e("representations","onKeyRelease",t.keypress.lastPressed)}};this.onMouseDownAnywhere=()=>{const{marker:t,state:e}=this.handlers;if(e.inState("none")){this.auxiliaries.highlightrects.clear();this.drawUser()}};this.onMouseDownHere=()=>{const{marker:t,click:e,drag:s,state:i}=this.handlers;const{highlightrects:r}=this.auxiliaries;if(i.inState("none")){t.clearCurrent();this.auxiliaries.highlightrects.clear()}i.deactivateAll();this.activate();t.updateCurrent(this.inClickPosition(e.clickLast),i.membership)};this.onDoubleClick=()=>{const{marker:t,drag:e,state:s}=this.handlers;s.activateAll();t.clearAll();this.auxiliaries.highlightrects.clear();this.drawHighlight();this.drawUser();s.deactivateAll()};this.draw=(t,...e)=>{const{representations:s,auxiliaries:i,callChildren:r}=this;const a="draw"+l.capitalize(t);const n="graphic"+l.capitalize(t);if(t!=="user")this[n].drawClear();if(t==="base")this[n].drawBackground();r("representations",a,this[n],...e);r("auxiliaries",a,this[n],...e)};this.drawBase=()=>this.draw("base");this.drawHighlight=()=>this.draw("highlight");this.drawUser=()=>{if(this.active||this.handlers.state.inState("none"))this.draw("user")};this.initialize=()=>{const{handlers:t,scales:e,callChildren:s,onMouseDownHere:i,onMouseDownAnywhere:r,onDoubleClick:a,onKeypress:n,onKeyRelease:l,drawBase:o,drawHighlight:h,drawUser:c,startDrag:u,whileDrag:d,endDrag:p,graphicContainer:g,graphicDiv:f}=this;Object.keys(e).forEach(t=>{e[t]?.registerData(this.getUnique(t))});s("representations","registerScales",e);s("auxiliaries","registerScales",e);this.handlers.drag.state=this.handlers.state;f.addEventListener("dblclick",a);f.addEventListener("mousedown",r);g.addEventListener("mousedown",i);t.marker.registerCallbacks([h,h],["updateCurrent","clearAll"]);t.state.registerCallbacks([c],["deactivateAll"]);t.drag.registerCallbacks([u,d,p],["startDrag","whileDrag","endDrag"]);t.keypress.registerCallbacks([n,l,o],["keyPressed","keyReleased","keyPressed"]);o()};this.id=t;this.representations={};this.wranglers={};this.scales={};this.handlers={marker:r.marker,keypress:r.keypress,state:r.state,drag:new n.DragHandler(this.graphicContainer),click:new n.ClickHandler(this.graphicContainer)};this.auxiliaries={axisbox:new a.AxisBox,axistextx:new a.AxisText("x"),axistexy:new a.AxisText("y"),axistitlex:new a.AxisTitle("x",i.get("x")),axistitley:new a.AxisTitle("y",i.get("y")),highlightrects:new a.HighlightRects(this.handlers)}}get active(){return this.handlers.state.isActive(this.id)}}e.Plot=i});t("handlers/ClickHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClickHandler=void 0;class i extends s.Handler{constructor(t){super();this.mouseDown=t=>{this.holding=true;this.clickCurrent=[t.offsetX,t.offsetY];this.clickLast=[t.offsetX,t.offsetY];this.notifyAll("mouseDown")};this.mouseUp=t=>{this.holding=false;this.clickCurrent=[null,null];this.notifyAll("mouseUp")};this.container=t;this.holding=false;this.clickCurrent=[null,null];this.clickLast=[null,null];this.actions=["mousedown","mouseup"];this.consequences=["mouseDown","mouseUp"];this.actions.forEach((t,e)=>{this.container.addEventListener(t,t=>this[this.consequences[e]](t))})}}e.ClickHandler=i});t("handlers/handlers",["require","exports","handlers/MarkerHandler","handlers/KeypressHandler","handlers/DragHandler","handlers/StateHandler","handlers/ClickHandler"],function(t,e,s,i,r,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});l(s,e);l(i,e);l(r,e);l(a,e);l(n,e)});t("plot/ScatterPlot",["require","exports","scales/scales","representations/representations","wrangler/Wrangler","plot/Plot"],function(t,e,a,n,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScatterPlot=void 0;class i extends s.Plot{constructor(t,e,s,i,r){super(t,e,s,i,r);this.mapping=i;this.wranglers={identity:new l.Wrangler(s,i,r.marker).extractAsIs("x","y")};this.scales={x:new a.XYScaleContinuous(this.width),y:new a.XYScaleContinuous(this.height,-1)};this.representations={points:new n.Points(this.wranglers.identity)};this.initialize()}}e.ScatterPlot=i});t("plot/BubblePlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,a,n,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BubblePlot=void 0;class i extends s.Plot{constructor(t,e,s,i,r){super(t,e,s,i,r);this.wranglers={identity:new o.Wrangler(s,i,r.marker).splitBy("x","y").splitWhat("size").doWithin("by",l.unique).doWithin("what",l.length).assignIndices()};this.scales={x:new a.XYScaleDiscrete(this.width),y:new a.XYScaleDiscrete(this.height,-1),size:new a.AreaScaleContinuous(this.width)};this.representations={points:new n.Points(this.wranglers.identity)};this.initialize()}}e.BubblePlot=i});t("plot/BarPlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,a,n,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BarPlot=void 0;class i extends s.Plot{constructor(t,e,s,i,r){super(t,e,s,i,r);this.mapping=i;this.wranglers={summary:new o.Wrangler(s,i,r.marker).splitBy("x").splitWhat("y").doWithin("by",l.unique).doWithin("what",l.sum).assignIndices()};this.scales={x:new a.XYScaleDiscrete(this.width),y:new a.XYScaleContinuous(this.height,-1,true)};this.representations={bars:new n.Bars(this.wranglers.summary,.8)};this.initialize()}}e.BarPlot=i});t("plot/HistoPlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,a,n,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.HistoPlot=void 0;class i extends s.Plot{constructor(t,e,s,i,r){super(t,e,s,i,r);this.wranglers={summary:new o.Wrangler(s,i,r.marker).splitBy("x").splitWhat("y").doAcross("by",l.bin,10).doWithin("by",l.unique).doWithin("what",l.length).assignIndices()};this.scales={x:new a.XYScaleContinuous(this.width),y:new a.XYScaleContinuous(this.height,-1,true)};this.representations={bars:new n.Bars(this.wranglers.summary,1)};this.initialize()}}e.HistoPlot=i});t("plot/SquarePlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,a,n,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SquarePlot=void 0;class i extends s.Plot{constructor(t,e,s,i,r){super(t,e,s,i,r);this.wranglers={identity:new o.Wrangler(s,i,r.marker).splitBy("x","y").splitWhat("size").doWithin("by",l.unique).doWithin("what",l.length).assignIndices()};this.scales={x:new a.XYScaleDiscrete(this.width),y:new a.XYScaleDiscrete(this.height,-1),size:new a.AreaScaleContinuous(this.width)};this.representations={points:new n.Squares(this.wranglers.identity)};this.initialize()}}e.SquarePlot=i});t("plot/plots",["require","exports","plot/ScatterPlot","plot/BubblePlot","plot/BarPlot","plot/HistoPlot","plot/SquarePlot"],function(t,e,s,i,r,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});l(s,e);l(i,e);l(r,e);l(a,e);l(n,e)});t("Mapping",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Mapping=void 0;class s extends Map{constructor(...t){super([...t])}}e.Mapping=s});t("Scene",["require","exports","datastructures","handlers/handlers","plot/plots"],function(t,e,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Scene=void 0;class s{constructor(t,e){this.addPlotWrapper=(e,t)=>{const{element:s,data:i,handlers:r,plotIds:a}=this;const n=o.plotTypeArray.findIndex(t=>t===e);this.nPlotsOfType[n]++;const l=`${e}${this.nPlotsOfType[n]}`;this.plots[l]=new h(e,l,s,i,t,r);a.push(l);r.state.plotIds.push(l);r.state.plotsActive.push(false);r.state.plotContainers.push(this.plots[l].graphicContainer);return this};this.element=t;this.data=e;this.nObs=e[Object.keys(e)[0]].length;this.nPlots=0;this.nPlotsOfType=Array(o.plotTypeArray.length).fill(0);this.plots={};this.plotIds=[];this.handlers={marker:new r.MarkerHandler(this.nObs),keypress:new r.KeypressHandler,state:new r.StateHandler};this.handlers.state.keypressHandler=this.handlers.keypress;const s=document.head;const i=document.createElement("link");i.type="text/css";i.rel="stylesheet";i.href="./styles.css";s.appendChild(i)}}e.Scene=s;class h{constructor(t,...e){const s={scatter:i.ScatterPlot,bubble:i.BubblePlot,bar:i.BarPlot,histo:i.HistoPlot,square:i.SquarePlot};return new s[t](...e)}}});t("examples",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true})});t("main",["require","exports","functions","examples","Scene","DataFrame","Mapping"],function(t,e,s,i,r,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});l(s,e);l(i,e);l(r,e);l(a,e);l(n,e)});"marker:resolver";function n(e){if(i[e]){return i[e]}else if(i[e+"/index"]){return i[e+"/index"]}else{const t=["exports"];const s=t=>{try{Object.defineProperty(t,"__cjsModule",{value:true});Object.defineProperty(t,"default",{value:require(e)})}catch{throw Error(['module "',e,'" not found.'].join(""))}};return{dependencies:t,factory:s}}}const o={};function h(t){if(o[t]){return o[t]}if(t==="exports"){return{}}const e=n(t);if(typeof e.factory!=="function"){return e.factory}o[t]={};const s=e.dependencies.map(t=>h(t));e.factory(...s);const i=s[e.dependencies.indexOf("exports")];o[t]=i["__cjsModule"]?i.default:i;return o[t]}if(r[0]!==null){return h(r[0])}})();